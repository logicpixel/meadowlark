<form class="form-horizontal" role="form" enctype="multipart/form-data" method="POST" action="/contest/vacation-photo/{{year}}/{{month}}">
   <div class="form-group">
     <label for="fieldName" class="col-sm-2 control-label">Name</label>
     <div class="col-sm-4">
       <input type="text" class="form-control" id="fieldName" name="name">
     </div>
   </div>
   <div class="form-group">
     <label for="fieldEmail" class="col-sm-2 control-label">Email</label>
     <div class="col-sm-4">
       <input type="email" class="form-control" required id="fieldName" name="email">
     </div>
   </div>
   <div class="form-group">
     <label for="fieldPhoto" class="col-sm-2 control-label">Vacation photo</label>
     <div class="col-sm-4">
      <span class="btn btn-default btn-file">
       <input type="file" class="form-control" required accept="image/*" id="fieldPhoto" data-url="/upload" name="photo" multiple>
     </span>
     <div id="fileUploads"></div>
    </div>
   </div>
   <div class="form-group">
     <div class="col-sm-offset-2 col-sm-4">
     <button type="submit" class="btn btn-primary">Submit</button>
     </div>
   </div>
</form>
{{#section 'jquery'}}
  <script src='/vendor/jqfu/vendor/jquery.ui.widget.js'></script>
  <script src='/vendor/jqfu/jquery.iframe-transport.js'></script>
  <script src='/vendor/jqfu/jquery.fileupload.js'></script>
  <script>
    $("#fieldPhoto").fileupload({
      dataType: 'json',
      done: function(e, data){
        console.log(data.result);
        console.log(data.result.files);
        $.each(data.result.files, function(index, file){
          $("#fileUploads").append($("<div style='background-image: url("+file.url+"); background-width: 100%; background-height: auto; width: 100px; height: 100px; float: left' class='upload'" +
                                   "<span class='glyphicon glyphicon-ok'></span>" +
                                   "&nbsp; " + file.originalName + "</div>"))
        })
      }
    });
  </script>
{{/section}}
